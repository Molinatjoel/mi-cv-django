<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hoja de Vida - {{ perfil.nombres }}</title>
    <style>
        /* RESET */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: hidden;
        }

        /* --- FONDO INTERACTIVO --- */
        #interactive-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }

        /* Estilo de la burbuja */
        .db-bubble {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 12px;
            transition: transform 0.2s ease-out;
            will-change: transform, top, left;
        }

        .db-bubble img {
            width: 80%;
            height: 80%;
            object-fit: contain;
            opacity: 0.9;
        }

        /* CONTENEDOR PRINCIPAL */
        .cv-wrapper {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        .main-content { width: 100%; background-color: transparent; }

        @media (max-width: 800px) { .cv-wrapper { padding: 10px; } }
    </style>
</head>
<body>
    <div id="interactive-background"></div>

    <div class="cv-wrapper">
        <main class="main-content">
            {% block contenido %}
            {% endblock %}
        </main>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const container = document.getElementById('interactive-background');
            const numBubbles = 15;
            const bubbles = [];
            let mouseX = 0;
            let mouseY = 0;

            // URLs DE LOS LOGOS (Links actualizados y más estables)
            const logos = [
                'https://cdn-icons-png.flaticon.com/512/3161/3161158.png', // Microsoft SQL Server (Nuevo)
                'https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Oracle_logo.svg/512px-Oracle_logo.svg.png', // ORACLE
                'https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Postgresql_elephant.svg/512px-Postgresql_elephant.svg.png', // PostgreSQL
                'https://upload.wikimedia.org/wikipedia/labs/8/8e/Mysql_logo.png' // MySQL
            ];

            function random(min, max) {
                return Math.random() * (max - min) + min;
            }

            class Bubble {
                constructor() {
                    this.element = document.createElement('div');
                    this.element.classList.add('db-bubble');
                    
                    // TAMAÑO: Entre 70 y 85
                    this.size = random(70, 85);
                    this.element.style.width = `${this.size}px`;
                    this.element.style.height = `${this.size}px`;

                    this.x = random(0, window.innerWidth - this.size);
                    this.y = random(0, window.innerHeight - this.size);
                    
                    this.vx = random(-0.4, 0.4);
                    this.vy = random(-0.4, 0.4);

                    const img = document.createElement('img');
                    img.src = logos[Math.floor(Math.random() * logos.length)];
                    // Añadimos un gestor de error por si acaso alguna imagen falla
                    img.onerror = function() { this.style.display = 'none'; };
                    this.element.appendChild(img);
                    
                    container.appendChild(this.element);
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;

                    if (this.x <= 0 || this.x + this.size >= window.innerWidth) this.vx *= -1;
                    if (this.y <= 0 || this.y + this.size >= window.innerHeight) this.vy *= -1;

                    // Interacción Mouse
                    const centerX = this.x + this.size / 2;
                    const centerY = this.y + this.size / 2;
                    const dx = mouseX - centerX;
                    const dy = mouseY - centerY;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    const interactionRadius = 150;
                    let moveX = 0;
                    let moveY = 0;

                    if (distance < interactionRadius) {
                        const force = (interactionRadius - distance) / interactionRadius;
                        const angle = Math.atan2(dy, dx);
                        moveX = -Math.cos(angle) * force * 60;
                        moveY = -Math.sin(angle) * force * 60;
                    }

                    this.element.style.top = `${this.y}px`;
                    this.element.style.left = `${this.x}px`;
                    this.element.style.transform = `translate(${moveX}px, ${moveY}px)`;
                }
            }

            for (let i = 0; i < numBubbles; i++) {
                bubbles.push(new Bubble());
            }

            function animate() {
                bubbles.forEach(bubble => bubble.update());
                requestAnimationFrame(animate);
            }

            animate();

            window.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            window.addEventListener('resize', () => {
                bubbles.forEach(b => {
                    b.x = Math.min(b.x, window.innerWidth - b.size);
                    b.y = Math.min(b.y, window.innerHeight - b.size);
                });
            });
        });
    </script>
</body>
</html>
